(window["webpackJsonpmy-reads"]=window["webpackJsonpmy-reads"]||[]).push([[0],{26:function(e,t,n){e.exports=n(42)},31:function(e,t,n){},32:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(20),s=n.n(o),c=(n(31),n(5)),i=n(6),l=n(8),u=n(7),h=n(9),d=n(10),f=(n(32),n(15)),p=n.n(f),v=n(21),m=n(22);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach(function(t){Object(m.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var k="https://reactnd-books-api.udacity.com",y=localStorage.token;y||(y=localStorage.token=Math.random().toString(36).substr(-8));var E={Accept:"application/json",Authorization:y},O=function(e,t){return fetch("".concat(k,"/books/").concat(e.id),{method:"PUT",headers:g({},E,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},j=function(e){return fetch("".concat(k,"/search"),{method:"POST",headers:g({},E,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})};var D=function(e){var t=e.categories,n=e.defaultCategory,a=e.onMove;return r.a.createElement("select",{value:n,onChange:function(e){return a(e,e.target.value)}},r.a.createElement("option",{disabled:!0},"Move to ..."),t.map(function(e){return r.a.createElement("option",{key:e,value:e},e.replace(/([A-Z])/g," $1").trim().split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" "))}))},w=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",title:"",authors:"",coverImage:"",shelf:"",dragging:!1},n.handleMove=function(e,t){var a=n.props.onMove;e.preventDefault(),""!==n.state.id&&O(n.state,t).then(function(){a&&a(n.state.id,t),n.setState({shelf:t})})},n.handleDragStart=function(e,t){e.dataTransfer.setData("text/plain",t),e.dataTransfer.dropEffect="move",n.setState({dragging:!0})},n.handleDragEnd=function(){n.setState({dragging:!1})},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.id,fetch("".concat(k,"/books/").concat(e),{headers:E}).then(function(e){return e.json()}).then(function(e){return e.book})).then(function(e){var n=e.id,a=e.title,r=e.authors,o=e.imageLinks?e.imageLinks.thumbnail:"",s=e.shelf;t.setState({id:n,title:a,authors:r,coverImage:o,shelf:s})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.id,a=t.title,o=t.authors,s=t.coverImage,c=t.shelf,i=["book"];return this.state.dragging&&i.push("dragging"),i=i.join(" "),r.a.createElement("div",{draggable:this.props.draggable,className:i,onDragStart:function(t){return e.handleDragStart(t,n)},onDragEnd:this.handleDragEnd},r.a.createElement("div",{className:"book-top"},r.a.createElement("img",{className:"book-cover",src:s,alt:a,draggable:"false"}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement(D,{categories:this.props.shelves,defaultCategory:c,bookId:n,onMove:this.handleMove}))),r.a.createElement("h3",{className:"book-title"},a),r.a.createElement("p",{className:"book-authors"},o&&o.map(function(e){return r.a.createElement("span",{key:e},e,r.a.createElement("br",null))})))}}]),t}(a.Component),S=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={dropArea:!1},n.handleDragOver=function(e){e.preventDefault()},n.handleDragEnter=function(e){e.preventDefault(),n.setState({dropArea:!0})},n.handleDragLeave=function(e){e.preventDefault(),n.setState(function(e){return{dropArea:!1}})},n._getDropAreaClass=function(){var e=["drop-area"];return n.state.dropArea||e.push("hidden"),e.join(" ")},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,a=t.books,o=t.shelves,s=t.onMove,c=t.onDrop,i=t.shelfName,l=t.dnd,u=this._getDropAreaClass();return r.a.createElement("div",{className:"bookshelf",onDragEnter:this.handleDragEnter,onDragOver:this.handleDragOver,onDrop:function(t){e.handleDragLeave(t),c(t,i)}},n&&r.a.createElement("h2",{className:"bookshelf-title"},n),r.a.createElement("div",{className:u,onDragLeave:function(t){return e.handleDragLeave(t)}},r.a.createElement("p",null,"Move book to shelf: ",n)),r.a.createElement("ul",{className:"books-grid"},a.map(function(e){return r.a.createElement(w,{key:e.id,id:e.id,shelves:o,onMove:s,draggable:l})})))}}]),t}(a.Component),N=n(11),M=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],shelves:["currentlyReading","wantToRead","read","none"]},n.handleMove=function(e,t){n.setState(function(n){return{books:n.books.map(function(n){return n.id===e&&(n.shelf=t),n})}})},n.handleDrop=function(e,t){var a=e.dataTransfer.getData("text");n.handleMove(a,t),O(n.state.books.find(function(e){return e.id===a}),t)},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k,"/books"),{headers:E}).then(function(e){return e.json()}).then(function(e){return e.books});case 2:(t=e.sent)&&this.setState({books:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.shelves,t=this.state.books.filter(function(e){return"currentlyReading"===e.shelf}),n=this.state.books.filter(function(e){return"wantToRead"===e.shelf}),a=this.state.books.filter(function(e){return"read"===e.shelf});return r.a.createElement("div",{className:"page-content"},r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads")),r.a.createElement(S,{title:"Currently Reading",books:t,shelfName:"currentlyReading",shelves:e,dnd:!0,onMove:this.handleMove,onDrop:this.handleDrop}),r.a.createElement(S,{title:"Want to Read",books:n,shelfName:"wantToRead",shelves:e,dnd:!0,onMove:this.handleMove,onDrop:this.handleDrop}),r.a.createElement(S,{title:"Read",books:a,shelfName:"read",shelves:e,dnd:!0,onMove:this.handleMove,onDrop:this.handleDrop}),r.a.createElement(N.b,{className:"open-search",to:"/search"},r.a.createElement("button",null)))}}]),t}(a.Component);var A=function(e){var t=e.value,n=e.onSearch;return r.a.createElement("div",{className:"search-books-bar"},r.a.createElement(N.b,{to:"/",className:"close-search"}),r.a.createElement("input",{type:"text",value:t,onChange:function(e){return n(e)}}))},C=n(25),R=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={query:"",books:[],shelves:["currentlyReading","wantToRead","read","none"]},n._getBookRaw=function(e){j(e).then(function(e){return e&&Array.isArray(e)?n.setState({books:e}):n.setState({books:[]})})},n._getBook=Object(C.debounce)(n._getBookRaw,300),n.handleSearch=function(e){e.preventDefault();var t=e.target.value;n.setState({query:t},n._getBook(t))},n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(A,{onSearch:this.handleSearch,value:this.state.query}),r.a.createElement("div",{className:"search-books-results"},0!==this.state.books.length?r.a.createElement(S,{books:this.state.books,shelves:this.state.shelves}):r.a.createElement("h2",null,"No Books Found. Search for a category. (e.g. Poetry)")))}}]),t}(a.Component),P=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{exact:!0,path:"/",component:M}),r.a.createElement(d.a,{exact:!0,path:"/search",component:R}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(N.a,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.fcb79683.chunk.js.map